(function(e){"use strict";function t(e){if(!e)throw new Error("Assertion failed")}function r(e){var t;while(t=e.parentNode){e=t}return e}function i(e,t){if(!t)return;var n;var i="#"+t;while(!n){e=r(e);if(e.protoContent_)n=e.protoContent_.querySelector(i);else if(e.getElementById)n=e.getElementById(t);if(n||!e.templateCreator_)break;e=e.templateCreator_}return n}function s(e){while(e.parentNode){e=e.parentNode}return e.templateCreator_?e:null}function v(e){return e.tagName=="template"&&e.namespaceURI=="http://www.w3.org/2000/svg"}function m(e){return e.tagName=="TEMPLATE"&&e.namespaceURI=="http://www.w3.org/1999/xhtml"}function g(e){return Boolean(h[e.tagName]&&e.hasAttribute("template"))}function y(e){if(e.isTemplate_===undefined)e.isTemplate_=e.tagName=="TEMPLATE"||g(e);return e.isTemplate_}function b(e,t){var r=e.querySelectorAll(d);if(y(e))t(e);n(r,t)}function w(e){function t(e){if(!HTMLTemplateElement.decorate(e))w(e.content)}b(e,t)}function S(e,t){Object.getOwnPropertyNames(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}function x(e){var t=e.ownerDocument;if(!t.defaultView)return t;var n=t.templateContentsOwner_;if(!n){n=t.implementation.createHTMLDocument("");while(n.lastChild){n.removeChild(n.lastChild)}t.templateContentsOwner_=n}return n}function T(e){if(!e.stagingDocument_){var t=e.ownerDocument;if(!t.stagingDocument_){t.stagingDocument_=t.implementation.createHTMLDocument("");t.stagingDocument_.isStagingDocument=true;var n=t.stagingDocument_.createElement("base");n.href=document.baseURI;t.stagingDocument_.head.appendChild(n);t.stagingDocument_.stagingDocument_=t.stagingDocument_}e.stagingDocument_=t.stagingDocument_}return e.stagingDocument_}function N(e){var t=e.ownerDocument.createElement("template");e.parentNode.insertBefore(t,e);var n=e.attributes;var r=n.length;while(r-->0){var i=n[r];if(c[i.name]){if(i.name!=="template")t.setAttribute(i.name,i.value);e.removeAttribute(i.name)}}return t}function C(e){var t=e.ownerDocument.createElement("template");e.parentNode.insertBefore(t,e);var n=e.attributes;var r=n.length;while(r-->0){var i=n[r];t.setAttribute(i.name,i.value);e.removeAttribute(i.name)}e.parentNode.removeChild(e);return t}function k(e,t,n){var r=e.content;if(n){r.appendChild(t);return}var i;while(i=t.firstChild){r.appendChild(i)}}function M(e){if(E)e.__proto__=HTMLTemplateElement.prototype;else S(e,HTMLTemplateElement.prototype)}function _(e){if(!e.setModelFn_){e.setModelFn_=function(){e.setModelFnScheduled_=false;var t=q(e,e.delegate_&&e.delegate_.prepareBinding);j(e,t,e.model_)}}if(!e.setModelFnScheduled_){e.setModelFnScheduled_=true;Observer.runEOM_(e.setModelFn_)}}function D(e,t,n,r){if(!e||!e.length)return;var i;var s=e.length;var o=0,u=0,a=0;var f=true;while(u<s){var o=e.indexOf("{{",u);var l=e.indexOf("[[",u);var c=false;var h="}}";if(l>=0&&(o<0||l<o)){o=l;c=true;h="]]"}a=o<0?-1:e.indexOf(h,o+2);if(a<0){if(!i)return;i.push(e.slice(u));break}i=i||[];i.push(e.slice(u,o));var p=e.slice(o+2,a).trim();i.push(c);f=f&&c;var d=r&&r(p,t,n);if(d==null){i.push(Path.get(p))}else{i.push(null)}i.push(d);u=a+2}if(u===s)i.push("");i.hasOnePath=i.length===5;i.isSimplePath=i.hasOnePath&&i[0]==""&&i[4]=="";i.onlyOneTime=f;i.combinator=function(e){var t=i[0];for(var n=1;n<i.length;n+=4){var r=i.hasOnePath?e:e[(n-1)/4];if(r!==undefined)t+=r;t+=i[n+3]}return t};return i}function P(e,t,n,r){if(t.hasOnePath){var i=t[3];var s=i?i(r,n,true):t[2].getValueFrom(r);return t.isSimplePath?s:t.combinator(s)}var o=[];for(var u=1;u<t.length;u+=4){var i=t[u+2];o[(u-1)/4]=i?i(r,n):t[u+1].getValueFrom(r)}return t.combinator(o)}function H(e,t,n,r){var i=t[3];var s=i?i(r,n,false):new PathObserver(r,t[2]);return t.isSimplePath?s:new ObserverTransform(s,t.combinator)}function B(e,t,n,r){if(t.onlyOneTime)return P(e,t,n,r);if(t.hasOnePath)return H(e,t,n,r);var i=new CompoundObserver;for(var s=1;s<t.length;s+=4){var o=t[s];var u=t[s+2];if(u){var a=u(r,n,o);if(o)i.addPath(a);else i.addObserver(a);continue}var f=t[s+1];if(o)i.addPath(f.getValueFrom(r));else i.addPath(r,f)}return new ObserverTransform(i,t.combinator)}function j(e,t,n,r){for(var i=0;i<t.length;i+=2){var s=t[i];var o=t[i+1];var u=B(s,o,e,n);var a=e.bind(s,u,o.onlyOneTime);if(a&&r)r.push(a)}e.bindFinished();if(!t.isTemplate)return;e.model_=n;var f=e.processBindingDirectives_(t);if(r&&f)r.push(f)}function F(e,t,n){var r=e.getAttribute(t);return D(r==""?"{{}}":r,t,e,n)}function I(e,n){t(e);var r=[];var i=false;var s=false;for(var o=0;o<e.attributes.length;o++){var u=e.attributes[o];var c=u.name;var h=u.value;while(c[0]==="_"){c=c.substring(1)}if(y(e)&&(c===l||c===a||c===f)){continue}var p=D(h,c,e,n);if(!p)continue;r.push(c,p)}if(y(e)){r.isTemplate=true;r.if=F(e,l,n);r.bind=F(e,a,n);r.repeat=F(e,f,n);if(r.if&&!r.bind&&!r.repeat)r.bind=D("{{}}",a,e,n)}return r}function q(e,t){if(e.nodeType===Node.ELEMENT_NODE)return I(e,t);if(e.nodeType===Node.TEXT_NODE){var n=D(e.data,"textContent",e,t);if(n)return["textContent",n]}return[]}function R(e,t,n,r,i,s,o,u){var a=t.appendChild(n.importNode(e,false));var f=0;for(var l=e.firstChild;l;l=l.nextSibling){R(l,a,n,r.children[f++],i,s,o)}if(r.isTemplate){HTMLTemplateElement.decorate(a,e);if(s)a.setDelegate_(s)}j(a,r,i,o);return a}function U(e,t){var n=q(e,t);n.children={};var r=0;for(var i=e.firstChild;i;i=i.nextSibling){n.children[r++]=U(i,t)}return n}function W(e){var t=e.id_;if(!t)t=e.id_=z++;return t}function X(e,t){var n=W(e);if(t){var r=t.bindingMaps[n];if(!r){r=t.bindingMaps[n]=U(e,t.prepareBinding)||[]}return r}var r=e.bindingMap_;if(!r){r=e.bindingMap_=U(e,undefined)||[]}return r}function $(e){this.closed=false;this.templateElement_=e;this.instances=[];this.deps=undefined;this.iteratedValue=[];this.presentValue=undefined;this.arrayObserver=undefined}var n=Array.prototype.forEach.call.bind(Array.prototype.forEach);var o;if(e.Map&&typeof e.Map.prototype.forEach==="function"){o=e.Map}else{o=function(){this.keys=[];this.values=[]};o.prototype={set:function(e,t){var n=this.keys.indexOf(e);if(n<0){this.keys.push(e);this.values.push(t)}else{this.values[n]=t}},get:function(e){var t=this.keys.indexOf(e);if(t<0)return;return this.values[t]},"delete":function(e,t){var n=this.keys.indexOf(e);if(n<0)return false;this.keys.splice(n,1);this.values.splice(n,1);return true},forEach:function(e,t){for(var n=0;n<this.keys.length;n++)e.call(t||this,this.values[n],this.keys[n],this)}}}var u="__proto__"in{}?function(e){return e}:function(e){var t=e.__proto__;if(!t)return e;var n=Object.create(t);Object.getOwnPropertyNames(e).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))});return n};if(typeof document.contains!="function"){Document.prototype.contains=function(e){if(e===this||e.parentNode===this)return true;return this.documentElement.contains(e)}}var a="bind";var f="repeat";var l="if";var c={template:true,repeat:true,bind:true,ref:true};var h={THEAD:true,TBODY:true,TFOOT:true,TH:true,TR:true,TD:true,COLGROUP:true,COL:true,CAPTION:true,OPTION:true,OPTGROUP:true};var p=typeof HTMLTemplateElement!=="undefined";if(p){(function(){var e=document.createElement("template");var t=e.content.ownerDocument;var n=t.appendChild(t.createElement("html"));var r=n.appendChild(t.createElement("head"));var i=t.createElement("base");i.href=document.baseURI;r.appendChild(i)})()}var d="template, "+Object.keys(h).map(function(e){return e.toLowerCase()+"[template]"}).join(", ");document.addEventListener("DOMContentLoaded",function(e){w(document);Platform.performMicrotaskCheckpoint()},false);if(!p){e.HTMLTemplateElement=function(){throw TypeError("Illegal constructor")}}var E="__proto__"in{};var L;if(typeof MutationObserver=="function"){L=new MutationObserver(function(e){for(var t=0;t<e.length;t++){e[t].target.refChanged_()}})}HTMLTemplateElement.decorate=function(e,n){if(e.templateIsDecorated_)return false;var r=e;r.templateIsDecorated_=true;var i=m(r)&&p;var s=i;var o=!i;var u=false;if(!i){if(g(r)){t(!n);r=N(e);r.templateIsDecorated_=true;i=p;u=true}else if(v(r)){r=C(e);r.templateIsDecorated_=true;i=p}}if(!i){M(r);var a=x(r);r.content_=a.createDocumentFragment()}if(n){r.instanceRef_=n}else if(o){k(r,e,u)}else if(s){w(r.content)}return true};HTMLTemplateElement.bootstrap=w;var A=e.HTMLUnknownElement||HTMLElement;var O={get:function(){return this.content_},enumerable:true,configurable:true};if(!p){HTMLTemplateElement.prototype=Object.create(A.prototype);Object.defineProperty(HTMLTemplateElement.prototype,"content",O)}S(HTMLTemplateElement.prototype,{bind:function(e,t,n){if(e!="ref")return Element.prototype.bind.call(this,e,t,n);var r=this;var i=n?t:t.open(function(e){r.setAttribute("ref",e);r.refChanged_()});this.setAttribute("ref",i);this.refChanged_();if(n)return;if(!this.bindings_){this.bindings_={ref:t}}else{this.bindings_.ref=t}return t},processBindingDirectives_:function(e){if(this.iterator_)this.iterator_.closeDeps();if(!e.if&&!e.bind&&!e.repeat){if(this.iterator_){this.iterator_.close();this.iterator_=undefined}return}if(!this.iterator_){this.iterator_=new $(this)}this.iterator_.updateDependencies(e,this.model_);if(L){L.observe(this,{attributes:true,attributeFilter:["ref"]})}return this.iterator_},createInstance:function(e,t,n){if(t)n=this.newDelegate_(t);else if(!n)n=this.delegate_;if(!this.refContent_)this.refContent_=this.ref_.content;var r=this.refContent_;if(r.firstChild===null)return V;var i=X(r,n);var s=T(this);var o=s.createDocumentFragment();o.templateCreator_=this;o.protoContent_=r;o.bindings_=[];o.terminator_=null;var u=o.templateInstance_={firstNode:null,lastNode:null,model:e};var a=0;var f=false;for(var l=r.firstChild;l;l=l.nextSibling){if(l.nextSibling===null)f=true;var c=R(l,o,s,i.children[a++],e,n,o.bindings_);c.templateInstance_=u;if(f)o.terminator_=c}u.firstNode=o.firstChild;u.lastNode=o.lastChild;o.templateCreator_=undefined;o.protoContent_=undefined;return o},get model(){return this.model_},set model(e){this.model_=e;_(this)},get bindingDelegate(){return this.delegate_&&this.delegate_.raw},refChanged_:function(){if(!this.iterator_||this.refContent_===this.ref_.content)return;this.refContent_=undefined;this.iterator_.valueChanged();this.iterator_.updateIteratedValue(this.iterator_.getUpdatedValue())},clear:function(){this.model_=undefined;this.delegate_=undefined;if(this.bindings_&&this.bindings_.ref)this.bindings_.ref.close();this.refContent_=undefined;if(!this.iterator_)return;this.iterator_.valueChanged();this.iterator_.close();this.iterator_=undefined},setDelegate_:function(e){this.delegate_=e;this.bindingMap_=undefined;if(this.iterator_){this.iterator_.instancePositionChangedFn_=undefined;this.iterator_.instanceModelFn_=undefined}},newDelegate_:function(e){function t(t){var n=e&&e[t];if(typeof n!="function")return;return function(){return n.apply(e,arguments)}}if(!e)return;return{bindingMaps:{},raw:e,prepareBinding:t("prepareBinding"),prepareInstanceModel:t("prepareInstanceModel"),prepareInstancePositionChanged:t("prepareInstancePositionChanged")}},set bindingDelegate(e){if(this.delegate_){throw Error("Template must be cleared before a new bindingDelegate "+"can be assigned")}this.setDelegate_(this.newDelegate_(e))},get ref_(){var e=i(this,this.getAttribute("ref"));if(!e)e=this.instanceRef_;if(!e)return this;var t=e.ref_;return t?t:e}});var z=1;Object.defineProperty(Node.prototype,"templateInstance",{get:function(){var e=this.templateInstance_;return e?e:this.parentNode?this.parentNode.templateInstance:undefined}});var V=document.createDocumentFragment();V.bindings_=[];V.terminator_=null;$.prototype={closeDeps:function(){var e=this.deps;if(e){if(e.ifOneTime===false)e.ifValue.close();if(e.oneTime===false)e.value.close()}},updateDependencies:function(e,t){this.closeDeps();var n=this.deps={};var r=this.templateElement_;var i=true;if(e.if){n.hasIf=true;n.ifOneTime=e.if.onlyOneTime;n.ifValue=B(l,e.if,r,t);i=n.ifValue;if(n.ifOneTime&&!i){this.valueChanged();return}if(!n.ifOneTime)i=i.open(this.updateIfValue,this)}if(e.repeat){n.repeat=true;n.oneTime=e.repeat.onlyOneTime;n.value=B(f,e.repeat,r,t)}else{n.repeat=false;n.oneTime=e.bind.onlyOneTime;n.value=B(a,e.bind,r,t)}var s=n.value;if(!n.oneTime)s=s.open(this.updateIteratedValue,this);if(!i){this.valueChanged();return}this.updateValue(s)},getUpdatedValue:function(){var e=this.deps.value;if(!this.deps.oneTime)e=e.discardChanges();return e},updateIfValue:function(e){if(!e){this.valueChanged();return}this.updateValue(this.getUpdatedValue())},updateIteratedValue:function(e){if(this.deps.hasIf){var t=this.deps.ifValue;if(!this.deps.ifOneTime)t=t.discardChanges();if(!t){this.valueChanged();return}}this.updateValue(e)},updateValue:function(e){if(!this.deps.repeat)e=[e];var t=this.deps.repeat&&!this.deps.oneTime&&Array.isArray(e);this.valueChanged(e,t)},valueChanged:function(e,t){if(!Array.isArray(e))e=[];if(e===this.iteratedValue)return;this.unobserve();this.presentValue=e;if(t){this.arrayObserver=new ArrayObserver(this.presentValue);this.arrayObserver.open(this.handleSplices,this)}this.handleSplices(ArrayObserver.calculateSplices(this.presentValue,this.iteratedValue))},getLastInstanceNode:function(e){if(e==-1)return this.templateElement_;var t=this.instances[e];var n=t.terminator_;if(!n)return this.getLastInstanceNode(e-1);if(n.nodeType!==Node.ELEMENT_NODE||this.templateElement_===n){return n}var r=n.iterator_;if(!r)return n;return r.getLastTemplateNode()},getLastTemplateNode:function(){return this.getLastInstanceNode(this.instances.length-1)},insertInstanceAt:function(e,t){var n=this.getLastInstanceNode(e-1);var r=this.templateElement_.parentNode;this.instances.splice(e,0,t);r.insertBefore(t,n.nextSibling)},extractInstanceAt:function(e){var t=this.getLastInstanceNode(e-1);var n=this.getLastInstanceNode(e);var r=this.templateElement_.parentNode;var i=this.instances.splice(e,1)[0];while(n!==t){var s=t.nextSibling;if(s==n)n=t;i.appendChild(r.removeChild(s))}return i},getDelegateFn:function(e){e=e&&e(this.templateElement_);return typeof e==="function"?e:null},handleSplices:function(e){if(this.closed||!e.length)return;var t=this.templateElement_;if(!t.parentNode){this.close();return}ArrayObserver.applySplices(this.iteratedValue,this.presentValue,e);var n=t.delegate_;if(this.instanceModelFn_===undefined){this.instanceModelFn_=this.getDelegateFn(n&&n.prepareInstanceModel)}if(this.instancePositionChangedFn_===undefined){this.instancePositionChangedFn_=this.getDelegateFn(n&&n.prepareInstancePositionChanged)}var r=new o;var i=0;for(var s=0;s<e.length;s++){var u=e[s];var a=u.removed;for(var f=0;f<a.length;f++){var l=a[f];var c=this.extractInstanceAt(u.index+i);if(c!==V){r.set(l,c)}}i-=u.addedCount}for(var s=0;s<e.length;s++){var u=e[s];var h=u.index;for(;h<u.index+u.addedCount;h++){var l=this.iteratedValue[h];var c=r.get(l);if(c){r.delete(l)}else{if(this.instanceModelFn_){l=this.instanceModelFn_(l)}if(l===undefined){c=V}else{c=t.createInstance(l,undefined,n)}}this.insertInstanceAt(h,c)}}r.forEach(function(e){this.closeInstanceBindings(e)},this);if(this.instancePositionChangedFn_)this.reportInstancesMoved(e)},reportInstanceMoved:function(e){var t=this.instances[e];if(t===V)return;this.instancePositionChangedFn_(t.templateInstance_,e)},reportInstancesMoved:function(e){var t=0;var n=0;for(var r=0;r<e.length;r++){var i=e[r];if(n!=0){while(t<i.index){this.reportInstanceMoved(t);t++}}else{t=i.index}while(t<i.index+i.addedCount){this.reportInstanceMoved(t);t++}n+=i.addedCount-i.removed.length}if(n==0)return;var s=this.instances.length;while(t<s){this.reportInstanceMoved(t);t++}},closeInstanceBindings:function(e){var t=e.bindings_;for(var n=0;n<t.length;n++){t[n].close()}},unobserve:function(){if(!this.arrayObserver)return;this.arrayObserver.close();this.arrayObserver=undefined},close:function(){if(this.closed)return;this.unobserve();for(var e=0;e<this.instances.length;e++){this.closeInstanceBindings(this.instances[e])}this.instances.length=0;this.closeDeps();this.templateElement_.iterator_=undefined;this.closed=true}};HTMLTemplateElement.forAllTemplatesFrom_=b})(this)
